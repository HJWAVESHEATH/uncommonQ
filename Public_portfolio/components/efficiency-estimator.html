<section class="calc-section">
  <h2>Model Efficiency Estimator</h2>
  <p>Estimate time and cost savings when validation and audit processes are automated through Hjermstad Quant systems.</p>

  <form id="effCalc">
    <label>Current Validation Time (days):</label>
    <input type="number" id="timeInput" value="14" min="1">
    <label>Models Validated per Year:</label>
    <input type="number" id="modelsInput" value="25" min="1">
    <label>Average Analyst Cost per Hour ($):</label>
    <input type="number" id="rateInput" value="90" min="1">
    <button type="submit" class="btn gold">Calculate</button>
  </form>

  <div id="calcResult" class="calc-result"></div>
  <div id="calcChart" class="plot"></div>
</section>

<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<script>
document.getElementById("effCalc").addEventListener("submit", e=>{
  e.preventDefault();
  const t = +timeInput.value;
  const n = +modelsInput.value;
  const r = +rateInput.value;
  const savedDays = t - 0.25; // your benchmark (6 hours)
  const totalHours = savedDays * 24 * n;
  const costSaved = totalHours * r;
  const pct = ((savedDays / t) * 100).toFixed(1);

  calcResult.innerHTML =
    `<p><strong>Time saved:</strong> ${savedDays.toFixed(2)} days per model (${pct}% faster).</p>
     <p><strong>Annual cost savings:</strong> $${costSaved.toLocaleString()}</p>`;

  Plotly.newPlot("calcChart", [{
    x:["Manual","Automated"],
    y:[t,0.25],
    type:"bar",
    marker:{color:["#999","#d4af37"]}
  }], {
    title:"Validation Time per Model",
    yaxis:{title:"Days"},
    paper_bgcolor:"rgba(0,0,0,0)",
    plot_bgcolor:"rgba(0,0,0,0)",
    font:{color:"#f9f9f9"}
  }, {displayModeBar:false});
});
</script>
